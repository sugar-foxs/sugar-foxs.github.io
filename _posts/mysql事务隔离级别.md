---
layout:     post
title:      mysql事务隔离级别
subtitle:   
date:       2020-01-11
author:     sugar-foxs
catalog: 	true
tags:
    - java
    - mysql
---

本篇介绍mysql InnodDB引擎的事务隔离级别。

<!-- more -->

# 事务隔离级别
- mysql的InnodDB引擎有4种隔离级别：未提交读、已提交读、可重复读、串行化。隔离级别是为了定义各个事务之间是否会有影响，有什么影响。

## 未提交读
未提交读的隔离级别最低，当前事务可以读取到其他还没有提交的事务里已经改变的数据。这个隔离级别会导致脏读，即读到脏数据。
- 脏读：因为其他事务还未提交，当前事务读取了其他事务里改变的数据，但是其他事务回退了，这就导致当前事务读取了实际上并没有出现的数据。

## 已提交读
已提交读隔离级别解决了上一个级别的脏读问题。只有事务提交了，其他事务才可以读取到当前事务里改变的数据。但是已提交读也会有两个问题：不可重复读和幻读。
- 不可重复读：当前事务读取两次相同数据行数的数据，读取到数据行数相同，但是数据不一致。这个问题针对其他事务的修改操作，修改了当前事务读取到的数据行中的数据。
- 幻读：当前事务读取两次相同数据行数的数据，读取到数据行数不同。这个问题针对其他事务的增加和删除操作，增加或者删除了当前事务读取到的数据行中的数据。

## 可重复读(默认)
可重复读级别使用行锁和间隙锁解决了上一个级别的两个问题。
- 间隙锁：这个锁会锁住当前事务读取的范围内的数据，保证其他事务修改不了改范围内的数据。所以可以保证不会发生不可重复读和幻读的问题。

## 串行化
- 串行化：顾名思义，事务串行执行，互不影响。一般很少用到，因为串行执行，效率不高。